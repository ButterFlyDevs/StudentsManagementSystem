<div flex ng-controller="attendanceControlController as vm">


    <div layout="row" layout-align="center" ng-cloak>
        <div flex="90" layout-padding>
            <div layout="row" layout-align="space-between start">
                <md-button class="md-primary md-raised"
                           ui-sref="teachers">
                    <md-icon>keyboard_arrow_left</md-icon>
                    Atras
                </md-button>
            </div>

            <p class="md-headline">Controles de Asistencia / <strong>Nuevo</strong></p>


            <div ng-if="!vm.dataIsReady">
                <spinner></spinner>
            </div>

            <div ng-if="vm.dataIsReady">


                <md-card layout="column" layout-margin layout-padding>
                    <!--Teacher info-->
                    Profesor:

                    <div flex="row">
                        <div flex="30">
                            <div layout="row">
                                <div ng-switch="vm.acBase.teacher.imageProfileUrl || '_undefined_'">
                                    <img ng-switch-when="_undefined_" class="img-profile"
                                         src="{{ vm.defaultAvatar }}">
                                    <img ng-switch-default class="img-profile-big" src="{{ vm.acBase.teacher.name }}">
                                </div>
                                <div flex>{{vm.acBase.teacher.name}} {{ vm.acBase.teacher.surname }}</div>

                            </div>

                        </div>
                        <!--Association info-->
                        <div flex="70">
                            Asignatura: {{ vm.acBase.association.subject.name }}
                            Grupo: {{ vm.acBase.association.classs.course }} {{ vm.acBase.association.classs.word }} {{
                            vm.acBase.association.classs.level }}
                        </div>

                    </div>

                    <md-list>
                        <md-list-item class="md-3-line" ng-repeat="student in vm.acBase.students">

                            <img ng-src="{{vm.defaultAvatar}}" class="md-avatar">
                            <div class="md-list-item-text">
                                <h3>{{student.name}}</h3>
                                <h4>{{student.surname}}</h4>
                            </div>

                            <div layout="row" layout-margin md-theme="specialtheme">

                                <!-- Assistance -->
                                <md-button
                                        ng-disabled="true"
                                        ng-click="vm.changeAssistanceForStudent(student.studentId)"
                                        class="md-icon-button">
                                    <md-icon ng-if="student.control.assistance == true"
                                             md-colors="{'color': 'specialpalette-pastelGreen'}">
                                        check_circle
                                    </md-icon>
                                    <md-icon ng-if="!student.control.assistance"
                                             md-colors="{'color': 'specialpalette-pastelRed'}">
                                        cancel
                                    </md-icon>

                                </md-button>

                                <!-- Uniform -->
                                <md-button
                                        ng-disabled="!vm.checkIfJustifiedDelayIsEnabled(student.control.uniform)"
                                        ng-click="vm.changeUniformForStudent(student.studentId)"
                                        class="md-icon-button">
                                    <md-icon ng-if="student.control.uniform || student.control.uniform == null"
                                             md-colors="{'color': 'specialpalette-pastelGreen'}">
                                        visibility
                                    </md-icon>
                                    <md-icon ng-if="student.control.uniform == false "
                                             md-colors="{'color': 'specialpalette-pastelRed'}">
                                        visibility_off
                                    </md-icon>
                                </md-button>

                                <!-- Delay -->
                                <md-button
                                        ng-disabled="!vm.checkIfDelayIsEnabled(student.control.delay)"
                                        ng-click="vm.changeDelayForStudent(student.studentId)"
                                        class="md-icon-button">
                                    <md-icon class="md-primary"> query_builder</md-icon>
                                </md-button>

                                <!-- Justified Delay -->
                                <md-button
                                        ng-disabled="!vm.checkIfJustifiedDelayIsEnabled(student.control.justifiedDelay)"
                                        ng-click="vm.changeAssistanceForStudent(student.studentId)"
                                        class="md-icon-button md-primary">
                                    <md-icon> verified_user</md-icon>
                                </md-button>


                            </div>

                            <md-divider ng-if="!$last"></md-divider>
                        </md-list-item>
                    </md-list>


                </md-card>
            </div>
        </div>
    </div>

</div>