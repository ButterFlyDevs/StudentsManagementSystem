<md-dialog ng-cloak>

    <md-toolbar>
        <div class="md-toolbar-tools">
            <h2>
                <md-icon>add</md-icon>
                Añadir docencia
            </h2>
            <span flex></span>
            <md-button class="md-icon-button" ng-click="vm.closeDialog()">
                <md-icon>close</md-icon>
            </md-button>
        </div>
    </md-toolbar>

    <md-dialog-content>
        <div class="md-dialog-content">

            <!-- Fields when the dialog is over subject teacher or student, view and process: SUBJECT - CLASS -->
            <div ng-if="vm.itsAboutTeacher || vm.itsAboutStudent">

                <md-input-container class="md-block" flex-gt-sm>
                    <label>Asignatura</label>
                    <md-select ng-model="vm.subjectSelected"
                               ng-change="vm.checkRelationSelected_Subject_Class(vm.subjectSelected, vm.classSelected)">
                        <md-option
                                ng-repeat="item in vm.subjectsList"
                                value="{{item.subjectId}}">
                            {{item.name}}
                        </md-option>
                    </md-select>
                </md-input-container>

                <md-input-container class="md-block" flex-gt-sm>
                    <label>Grupo</label>
                    <md-select ng-model="vm.classSelected"
                               ng-change="vm.checkRelationSelected_Subject_Class(vm.subjectSelected, vm.classSelected)">
                        <md-option
                                ng-repeat="item in vm.classesList"
                                value="{{item.classId}}">
                            {{item.course}}º
                            {{item.word}}
                            {{item.level}}
                        </md-option>
                    </md-select>
                </md-input-container>

            </div>

            <!-- Fields when the dialog is over SUBJECT PROFILE view and process: CLASS - TEACHER -->
            <div ng-if="vm.itsAboutSubject">


                <!-- CLASS -->
                <md-input-container class="md-block" flex-gt-sm>
                    <label>Grupo</label>
                    <md-select ng-model="vm.classSelected"
                               ng-change="vm.checkRelationSelected_Class_Teacher(vm.classSelected, vm.teacherSelected)">
                        <md-option
                                ng-repeat="item in vm.classesList"
                                value="{{item.classId}}">
                            {{item.course}}º
                            {{item.word}}
                            {{item.level}}
                        </md-option>
                    </md-select>
                </md-input-container>

                <!-- Would be Autocomplete custom template AUTOCOMPLETE for teachers -->
                <!-- TEACHER -->
                <md-input-container class="md-block" flex-gt-sm>
                    <label>Profesor</label>
                    <md-select ng-model="vm.teacherSelected"
                               ng-change="vm.checkRelationSelected_Class_Teacher(vm.classSelected, vm.teacherSelected)">
                        <md-option
                                ng-repeat="item in vm.teachersList"
                                value="{{item.teacherId}}">
                            {{item.name}}
                        </md-option>
                    </md-select>
                </md-input-container>


            </div>


            <!-- Fields when the dialog is over CLASS PROFILE view and process: SUBJECT - TEACHER -->
            <div ng-if="vm.itsAboutClass">

                <!-- SUBJECT -->
                <md-input-container class="md-block" flex-gt-sm>
                    <label>Asignatura</label>
                    <md-select ng-model="vm.subjectSelected"
                               ng-change="vm.checkRelationSelected_Subject_Teacher(vm.subjectSelected, vm.teacherSelected)">
                        <md-option
                                ng-repeat="item in vm.subjectsList"
                                value="{{item.subjectId}}">
                            {{item.name}}
                        </md-option>
                    </md-select>
                </md-input-container>

                <!-- Would be Autocomplete custom template AUTOCOMPLETE for teachers -->
                <!-- TEACHER -->
                <md-input-container class="md-block" flex-gt-sm>
                    <label>Profesor</label>
                    <md-select ng-model="vm.subjectSelected"
                               ng-change="vm.checkRelationSelected_Subject_Teacher(vm.subjectSelected, vm.teacherSelected)">
                        <md-option
                                ng-repeat="item in vm.teachersList"
                                value="{{item.teacherId}}">
                            {{item.name}}
                        </md-option>
                    </md-select>
                </md-input-container>


            </div>


        </div>

        <!-- Messages and options when is about teacher or student view -->
        <div ng-if="vm.itsAboutTeacher || vm.itsAboutStudent">
            <div ng-if="vm.associationRelationExists">
                <p>La relación entre la asignatura y la clase no existe.</p>
                ¿Deséa crearla al mismo tiempo que asignas a un profesor?
                <md-checkbox ng-model="vm.createNewAssociationCheckboxValue"
                             aria-label="Checkbox 1"
                             ng-click="vm.addButtonEnable = !vm.createNewAssociationCheckboxValue">

                </md-checkbox>

            </div>

            <div ng-if="vm.impartRelationExists">
                <p>Este profesor ya imparte clase de esta asignatura a este grupo.</p>
            </div>
            <div ng-if="vm.enrollmentRelationExists">
                <p>Este alumno ya está matriculado en esa asignatura y grupo.</p>
            </div>
        </div>

        <!-- When the case is over SUBJECT view -->
        <div ng-if="vm.itsAboutSubject">  <!-- All options -->

            <div ng-if="vm.associationRelationExists && vm.teacherSelected == -1">
                <p>Es necesario que seleccione un profesor.</p>
            </div>

            <div ng-if="vm.impartRelationExists">
                <p>Esta relación ya existe.</p>
            </div>

        </div>


    </md-dialog-content>


    <md-dialog-actions layout="row">

        <span flex></span>

        <md-button ng-click="vm.closeDialog()"> Cancelar</md-button>

        <md-button ng-disabled="!vm.addButtonEnable"
                   class="md-primary md-raised"
                   style="margin-right:20px;"
                   ng-click="vm.saveRelation()"> Añadir
        </md-button>

    </md-dialog-actions>

</md-dialog>