
<!--
Diseño de la vista de la pestaña de detalles del estudiante.
-->
<!--Añadimos el CSS y el javascript necesarios para poder usar las notificaciones flotantes -->
<link type="text/css" rel="stylesheet" href="app/css/components/notify.gradient.css" />
<script type="text/javascript" src="app/js/components/notify.js"></script>

<!--Título de la sección -->
<h3>Modificación del estudiante</h3>
<hr>

<form class="uk-form" name="formModAlumno" novalidate>
  <div flow-init flow-name="uploader.flow">

<!--Grid del formulario de edición de los datos de un alumno -->
<div class="uk-grid">




    <!--En la primera sección ponemos la imagen del usuario usando la url de este -->
    <div class="uk-width-1-4 ">


      <div class="uk-thumbnail uk-overlay-hover uk-border-circle">
        <figure class="uk-overlay">

            <div ng-if="uploader.flow.files[0] == None">
              <img ng-show="!alumno.imagen" class="uk-border-circle"  width="150" height="150" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkViZW5lXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjUwcHgiIGhlaWdodD0iMjUwcHgiIHZpZXdCb3g9IjAgMCAyNTAgMjUwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNTAgMjUwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxyZWN0IGZpbGw9IiNGNUY1RjUiIHdpZHRoPSIyNTAiIGhlaWdodD0iMjUwIi8+DQo8Zz4NCgk8cGF0aCBmaWxsPSIjRDhEOEQ4IiBkPSJNMjI3LjgxOCwyMDcuMjQ1Yy0xLjA0NS01Ljg0Ny0yLjM2OS0xMS4yNTktMy45NjUtMTYuMjUyYy0xLjU5OC00Ljk5NC0zLjc0Mi05Ljg1OS02LjQ0MS0xNC42MDYNCgkJYy0yLjY5Ny00Ljc0LTUuNzg5LTguNzg1LTkuMjgzLTEyLjEzMWMtMy41MDEtMy4zNDMtNy43NjgtNi4wMTUtMTIuODA5LTguMDEyYy01LjA0NS0xLjk5Ni0xMC42MTEtMi45OTUtMTYuNy0yLjk5NQ0KCQljLTAuODk3LDAtMi45OTQsMS4wNzQtNi4yOTEsMy4yMTljLTMuMjk1LDIuMTUtNy4wMTcsNC41NDYtMTEuMTU4LDcuMTg4Yy00LjE0NiwyLjY0Ni05LjUzNyw1LjA0NC0xNi4xNzYsNy4xODkNCgkJYy02LjY0MiwyLjE0OC0xMy4zMDgsMy4yMjEtMTkuOTk1LDMuMjIxYy02LjY4OSwwLTEzLjM1NC0xLjA3MS0xOS45OTUtMy4yMjFjLTYuNjQzLTIuMTQ2LTEyLjAzNi00LjU0My0xNi4xNzYtNy4xODkNCgkJYy00LjE0OC0yLjY0My03Ljg2My01LjAzNy0xMS4xNTgtNy4xODhjLTMuMjk1LTIuMTQ1LTUuMzkxLTMuMjE5LTYuMjkxLTMuMjE5Yy02LjA5NSwwLTExLjY2MSwwLjk5OS0xNi43MDEsMi45OTUNCgkJYy01LjA0MSwxLjk5Ny05LjMxMyw0LjY2OS0xMi44MDMsOC4wMTJjLTMuNTAxLDMuMzQ2LTYuNTkyLDcuMzkxLTkuMjg3LDEyLjEzMWMtMi42OTYsNC43NDctNC44NDcsOS42MTItNi40NDEsMTQuNjA2DQoJCWMtMS41OTcsNC45OTMtMi45MjIsMTAuNDA1LTMuOTcxLDE2LjI1MmMtMS4wNDYsNS44MzktMS43NDgsMTEuMjgtMi4wOTYsMTYuMzIzYy0wLjM0OSw1LjA0My0wLjUyNCwxMC4yMTMtMC41MjQsMTUuNQ0KCQljMCwzLjkyNSwwLjQzMiw3LjU1LDEuMjExLDEwLjkzMmgyMDguNDY0YzAuNzgxLTMuMzgyLDEuMjEzLTcuMDA3LDEuMjEzLTEwLjkzMmMwLTUuMjg3LTAuMTc2LTEwLjQ1Ny0wLjUyNi0xNS41DQoJCUMyMjkuNTY2LDIxOC41MjUsMjI4Ljg2OSwyMTMuMDg0LDIyNy44MTgsMjA3LjI0NXoiLz4NCgk8cGF0aCBmaWxsPSIjRDhEOEQ4IiBkPSJNMTI1LDE2Mi44MzRjMTUuODc1LDAsMjkuNDMtNS42MTcsNDAuNjY2LTE2Ljg1YzExLjIzMi0xMS4yMzUsMTYuODUtMjQuNzg5LDE2Ljg1LTQwLjY2Nw0KCQljMC0xNS44NzctNS42MTctMjkuNDI5LTE2Ljg1LTQwLjY2M0MxNTQuNDMsNTMuNDIyLDE0MC44NzUsNDcuODA0LDEyNSw0Ny44MDRzLTI5LjQzNCw1LjYxOS00MC42NjQsMTYuODUyDQoJCUM3My4xLDc1Ljg5LDY3LjQ4NCw4OS40NDEsNjcuNDg0LDEwNS4zMThjMCwxNS44NzgsNS42MTUsMjkuNDMxLDE2Ljg1Miw0MC42NjdDOTUuNTY2LDE1Ny4yMTcsMTA5LjEyNSwxNjIuODM0LDEyNSwxNjIuODM0eiIvPg0KPC9nPg0KPC9zdmc+DQo=" alt="">
              <img ng-show="alumno.imagen" class="uk-border-circle"  width="150" height="150" src={{alumno.imagen}} alt="">
            </div>
            <div ng-if="uploader.flow.files[0] != None">
              <!--Cuando la imagen se carga se muestra en el lugar. -->
              <img class="uk-border-circle" width="150" height="150" flow-img="uploader.flow.files[uploader.flow.files.length-1]" alt="">
            </div>



            <figcaption class="uk-overlay-panel uk-overlay-background uk-flex uk-flex-center uk-flex-middle uk-text-center uk-border-circle">
              <div>
                  <!--<span class="uk-icon-button uk-icon-plus"></span>-->
                  <button class="uk-icon-button uk-icon-plus" flow-btn type="file"></button>

              </div>
            </figcaption>
        </figure>


      </div> <!--Cierre de la definición del border-circle donde se enmarca-->
      <p>

      <!-- Habilitar para ver el número de imágenes cargadas en el flow.files (aunque nosotros usemos la última se carga detrás)
        Aquí: {{uploader.flow.files.length}}</p>
      -->


      <!-- Botón que elimina las imágnes del interior del círculo, pueden darse tres casos:

        1. Cuando el user no tiene foto y se muestra la por defecto pulsar la X llama a eliminarImagen que pone a null
        el dato de la imagen del bloque de info del alumno, que como no existe no surge nigún efecto y para el usuario no sucede nada.

        2. Cuando el user si tiene foto y se muestra en el círculo, se pulsa la X y se llama también a eliminarImagen() que pone a null
        el bloque de infor del user y su imagen desaparece del visor.

        3. Cuando se ha querido actualizar la foto o subir una pulsando el + del interior pero se desea cancelar la acción
        esta imagen se carga en flow.files y al pulsar sobre la X se detecta y se llama a $flow.cancel() que
        eliminar la imagen cargada en flow y por eso desaparece, quedando la del user anterior en caso de que este tuviera o ninguna
        en caso de que no tuviera.

      -->


            <div ng-if="uploader.flow.files.length != 0">
              <a class="uk-icon-hover uk-icon-medium uk-icon-remove" ng-click="$flow.cancel()"></a>
            </div>

            <div ng-if="uploader.flow.files.length == 0">
              <a class="uk-icon-hover uk-icon-medium uk-icon-remove" ng-click="eliminaImagen()"></a>
            </div>








    <!--

      <img ng-show="!alumno.imagen" class="uk-border-circle"  width="150" height="150" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkViZW5lXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjUwcHgiIGhlaWdodD0iMjUwcHgiIHZpZXdCb3g9IjAgMCAyNTAgMjUwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNTAgMjUwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxyZWN0IGZpbGw9IiNGNUY1RjUiIHdpZHRoPSIyNTAiIGhlaWdodD0iMjUwIi8+DQo8Zz4NCgk8cGF0aCBmaWxsPSIjRDhEOEQ4IiBkPSJNMjI3LjgxOCwyMDcuMjQ1Yy0xLjA0NS01Ljg0Ny0yLjM2OS0xMS4yNTktMy45NjUtMTYuMjUyYy0xLjU5OC00Ljk5NC0zLjc0Mi05Ljg1OS02LjQ0MS0xNC42MDYNCgkJYy0yLjY5Ny00Ljc0LTUuNzg5LTguNzg1LTkuMjgzLTEyLjEzMWMtMy41MDEtMy4zNDMtNy43NjgtNi4wMTUtMTIuODA5LTguMDEyYy01LjA0NS0xLjk5Ni0xMC42MTEtMi45OTUtMTYuNy0yLjk5NQ0KCQljLTAuODk3LDAtMi45OTQsMS4wNzQtNi4yOTEsMy4yMTljLTMuMjk1LDIuMTUtNy4wMTcsNC41NDYtMTEuMTU4LDcuMTg4Yy00LjE0NiwyLjY0Ni05LjUzNyw1LjA0NC0xNi4xNzYsNy4xODkNCgkJYy02LjY0MiwyLjE0OC0xMy4zMDgsMy4yMjEtMTkuOTk1LDMuMjIxYy02LjY4OSwwLTEzLjM1NC0xLjA3MS0xOS45OTUtMy4yMjFjLTYuNjQzLTIuMTQ2LTEyLjAzNi00LjU0My0xNi4xNzYtNy4xODkNCgkJYy00LjE0OC0yLjY0My03Ljg2My01LjAzNy0xMS4xNTgtNy4xODhjLTMuMjk1LTIuMTQ1LTUuMzkxLTMuMjE5LTYuMjkxLTMuMjE5Yy02LjA5NSwwLTExLjY2MSwwLjk5OS0xNi43MDEsMi45OTUNCgkJYy01LjA0MSwxLjk5Ny05LjMxMyw0LjY2OS0xMi44MDMsOC4wMTJjLTMuNTAxLDMuMzQ2LTYuNTkyLDcuMzkxLTkuMjg3LDEyLjEzMWMtMi42OTYsNC43NDctNC44NDcsOS42MTItNi40NDEsMTQuNjA2DQoJCWMtMS41OTcsNC45OTMtMi45MjIsMTAuNDA1LTMuOTcxLDE2LjI1MmMtMS4wNDYsNS44MzktMS43NDgsMTEuMjgtMi4wOTYsMTYuMzIzYy0wLjM0OSw1LjA0My0wLjUyNCwxMC4yMTMtMC41MjQsMTUuNQ0KCQljMCwzLjkyNSwwLjQzMiw3LjU1LDEuMjExLDEwLjkzMmgyMDguNDY0YzAuNzgxLTMuMzgyLDEuMjEzLTcuMDA3LDEuMjEzLTEwLjkzMmMwLTUuMjg3LTAuMTc2LTEwLjQ1Ny0wLjUyNi0xNS41DQoJCUMyMjkuNTY2LDIxOC41MjUsMjI4Ljg2OSwyMTMuMDg0LDIyNy44MTgsMjA3LjI0NXoiLz4NCgk8cGF0aCBmaWxsPSIjRDhEOEQ4IiBkPSJNMTI1LDE2Mi44MzRjMTUuODc1LDAsMjkuNDMtNS42MTcsNDAuNjY2LTE2Ljg1YzExLjIzMi0xMS4yMzUsMTYuODUtMjQuNzg5LDE2Ljg1LTQwLjY2Nw0KCQljMC0xNS44NzctNS42MTctMjkuNDI5LTE2Ljg1LTQwLjY2M0MxNTQuNDMsNTMuNDIyLDE0MC44NzUsNDcuODA0LDEyNSw0Ny44MDRzLTI5LjQzNCw1LjYxOS00MC42NjQsMTYuODUyDQoJCUM3My4xLDc1Ljg5LDY3LjQ4NCw4OS40NDEsNjcuNDg0LDEwNS4zMThjMCwxNS44NzgsNS42MTUsMjkuNDMxLDE2Ljg1Miw0MC42NjdDOTUuNTY2LDE1Ny4yMTcsMTA5LjEyNSwxNjIuODM0LDEyNSwxNjIuODM0eiIvPg0KPC9nPg0KPC9zdmc+DQo=" alt="">
      <img ng-show="alumno.imagen" class="uk-border-circle"  width="150" height="150" src={{alumno.imagen}} alt="">


      <a class="uk-icon-hover uk-icon-medium uk-icon-remove"></a>

    -->


    </div>



    <!--Sección del resto de datos del formulario -->
    <div class="uk-grid uk-width-3-4">

      <!--Nombre y apelidos en una bloque-->
      <div class="uk-grid">
        <!--Subsección 2, los datos que se van a modificar -->
        <div class="uk-widht-2-5">
            <!-- Campo nombre -->
            <p>Nombre</p>
            <input type="text" placeholder={{alumno.nombre}} name="nombre" ng-class="{ 'uk-form-danger' : formNuevoAlumno.nombre.$invalid && !formNuevoAlumno.$pristine }" ng-minlength="3"  ng-model="alumno.nombre" required>
            <br>
            <!-- Campo fecha nacimiento -->
            <p>Fecha nacimiento</p>
            <input type="text" name="fecha_nacimiento" placeholder="Fecha Nacimiento" ng-model="alumno.fecha_nacimiento" required>

        </div>

        <!--Subsección 2, los datos que se van a modificar -->
        <div class="uk-widht-2-5">
          <!-- Campo apellidos -->
          <p>Apellidos</p>
          <input type="text" placeholder={{alumno.apellidos}} name="apellidos" ng-class="{ 'uk-form-danger' : formNuevoAlumno.apellidos.$invalid && formNuevoAlumno.apellidos.$dirty }" ng-model="alumno.apellidos" ng-minlength="3" required>

          <br>
          <!-- Campo DNI -->
          <p>DNI</p>
          <input type="text" placeholder="DNI"  name="dni" ng-model="alumno.dni" required>

        </div>
      </div>

      <div class="uk-width-1-1">
        <!-- Campo direccion -->
        <p>Dirección</p>
        <input class="uk-form-width-large" name="direccion" type="text" placeholder={{alumno.direccion}} ng-model="alumno.direccion" required>
      </div>

      <!--Nombre y apelidos en una bloque-->
      <div class="uk-grid">
        <!--Subsección 2, los datos que se van a modificar -->
        <div class="uk-widht-2-5">
            <!-- Campo nombre -->
            <p>Localidad</p>
            <input type="text" name="localidad" placeholder="Localidad" ng-model="alumno.localidad" required>
        </div>

        <!--Subsección 2, los datos que se van a modificar -->
        <div class="uk-widht-2-5">
          <!-- Campo apellidos -->
          <p>Provincia</p>
          <input type="text" name="provincia" placeholder="Provincia" ng-model="alumno.provincia" required>
        </div>
      </div>

      <div class="uk-width-1-1">
        <!-- Campo telefono -->
        <p>Telefono</p>
        <input type="text" name="telefono" placeholder="Teléfono" ng-model="alumno.telefono" required>
      </div>


      <!--<input type="text" name="username" class="form-control" ng-model="user.username" ng-minlength="3" ng-maxlength="8">-->
      <p ng-show="formNuevoAlumno.apellidos.$error.minlength" class="uk-margin-top uk-text-danger">El apellido es demasiado corto.</p>
      <!--<p ng-show="userForm.username.$error.maxlength" class="help-block">Username is too long.</p>-->



    </div>
  </div>

  <br>
  <button ng-click="submitForm($flow)" class="uk-button"  data-message="Success message..." data-status="success" ng-class="{ 'uk-button-success' : !formNuevoAlumno.$invalid }" ng-disabled="formNuevoAlumno.$invalid">Modificar</button>
  <a ui-sref="estudiantes.list" class="uk-button uk-button-danger">Cancelar</a>


</div> <!-- fin del control de ng-flow -->
</form>
