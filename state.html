---
layout: default
---

		<!-- Highcharts library -->
 		<script src="https://cdnjs.cloudflare.com/ajax/libs/highcharts/4.2.1/highcharts.js"></script>


		<!-- Main -->


		<article id="main">

				<header class="special container">
					<span class="icon fa-calendar"></span>
					<h2><strong>TIMELINE</strong> del proyecto</h2>
					<p>Estado</p>
				</header>

				<div id="container" style="width:100%; height:350px;"></div>
				    <script>

						 function readTextFile(file)
							{

								  //Definimos el objeto que vamos a devoler.
									var datos = new Object();
									datos.numCommit = [];
									datos.lines_APIG = [];
                  datos.lines_mSBD = [];
									datos.lines_mSCE = [];


							    var rawFile = new XMLHttpRequest();
							    rawFile.open("GET", file, false);
							    rawFile.onreadystatechange = function ()
							    {
							        if(rawFile.readyState === 4)
							        {
							            if(rawFile.status === 200 || rawFile.status == 0)
							            {
							                var allText = rawFile.responseText;
							                alert(allText);

							            }
							        }
							    }
							    rawFile.send(null);

									/*
									Una vez que tengo el texto tendŕia que procesarlo para poder devolver en un formato estructurado
									y con sentido para el gráfico de JS pueda leer los datos bien y de forma simple.
									*/

									var lines = rawFile.responseText.split('\n');
									for(var line = 0; line < lines.length; line++){
										console.log(line);
      							console.log(lines[line]);

										var fields = lines[line].split(';');


									  datos.numCommit.push(fields[0]);
                    datos.lines_APIG.push(fields[2]);
                    datos.lines_mSBD.push(fields[3]);
                    datos.lines_mSCE.push(fields[4]);

										for (var field =0; field<fields.length; field++){
											console.log(field);
											console.log(fields[field]);
										}


    							}

                  console.log("Datos!");
									console.log(datos);
                  return datos
									//return rawFile.responseText;
							}

				      $(function () {

										  //Antes de que se pinte se tiene que acceder al fichero lines.txt y extraer los datos.
											var datos = readTextFile("lines.txt");
                      console.log('Datos procesados');
											console.log(datos);

									    $('#container').highcharts({
									        title: {
									            text: 'Monthly Average Temperature',
									            x: -20 //center
									        },
									        subtitle: {
									            text: 'Source: WorldClimate.com',
									            x: -20
									        },
									        xAxis: {
															//El eje x iría el número del commit
									            //categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
                              categories: datos.numCommit
									        },
									        yAxis: {
									            title: {
									                text: 'Temperature (°C)'
									            },
									            plotLines: [{
									                value: 0,
									                width: 1,
									                color: '#808080'
									            }]
									        },
									        tooltip: {
									            valueSuffix: '°C'
									        },
									        legend: {
									            layout: 'vertical',
									            align: 'right',
									            verticalAlign: 'middle',
									            borderWidth: 0
									        },
													//Y en las series el número de lineas que tiene cada submodulo para ese commit
									        series: [{
									            name: 'Tokyo',
									            //data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
                              data: datos.lines_APIG
									        }, {
									            name: 'New York',
									            //data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
                              data: datos.lines_mSBD
									        }, {
									            name: 'Berlin',
									            //data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
                              data: datos.lines_mSCE
									        }]
									    });





				          });
				    </script>

				</article>
